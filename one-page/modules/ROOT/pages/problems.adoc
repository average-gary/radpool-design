= Problems

Current efforts to build mining pools can be split into two types -
centralised pools with a single entity running the pool services or
p2p pools. Centralised pools carry out share validation, accounting
and reward distribution using a single entity. P2P pools push these
operational responsibilities to the edges of the network - i.e. the
miners.

In this section, we describe the problems faced by both these
approaches.

== Problems with Centralised Pool

image::centralised.png[alt="centralised pools",width="50%"]

=== Centralised Block Template Generation

All pool operators use a single block template that they generate and
distribute work to miners based on that block template. Stratum V2
attempts to solve this problem, however, the centralised pool can
still censor a miner by refusing to accept the proposed block template
or refusing to pay the miner after the fact.

=== Opaque Share and Fee Accounting

The collection of shares is opaque in all centralised pools, so miners
can't verify that they are being paid fairly. Ocean's approach with
https://ocean.xyz/docs/tides[TIDES] enables verification of each
miner's shares, however, miners still don't see the fees charged by
the pool is uniform across all miners. It is possible that larger
miners get a discounted fees on centralised pools.

=== Custodial Miner Payouts

All centralised pools pay miner's in a custodial manner and therefore
can hold miner hostage into following any arbitrary rules imposed by
the pool operator.

== Problem With P2P Pools

image::p2p.png[alt="p2p pools",width="50%"]

=== Added Friction To Migrate

Peer to peer pools require that miners run additional services next to
their mining rigs. These services are required to build block
templates and to reach consensus on the p2p mining pool on the share
and reward distribution. We believe this added friction will reduce
the adoption of p2p pools for the long tail of miners. These long tail
of miners are critical to resist mining centralisation pressure.

=== Custodial Payouts

In P2P pools, miner payouts are under the control of a threshold
signature, which can be hijacked by someone with a 51% hashrate on the
pool. Ideally, we need a solution where a mining doesn't require
permission from the threshold of miners to exit the pool with their
payout. Braidpool's
https://gist.github.com/pool2win/77bb9b98f9f3b8c0f90963343c3c840f[UHPO
model] is an example where a miner needs permission from a threshold
of miners to exit with their payout.

=== Challenges of Scale

P2Pool used a single block chain to provide consensus on the PoW
shares generated by miners. However, the use of linear chain resulted
in the limits to how many miners the pool could co-ordinate. As more
miners joined the pool, more shares were deemed Dead on Arrival,
i.e. they didn't earn a reward for the work done. This problem can be
solved by using a DAG instead of a linear chain, however, reaching
consensus on the scale of 10,000 nodes is still an unsolved
problem. There are some protocols from academia, but none of those
have reached production scale of tens of thousands of nodes.

=== Threshold Signature In P2P Network Model

Running Threshold Signatures on a P2P model is still not solved. The
network model required by FROST needs nodes to be connected in a point
to point network, and running gossip broadcast breaks the assumptions
made in the security proofs of threshold signature protocols.

The next pages present a new design that uses a syndicate of operators
to replace centralised pool operators, and avoids the above listed
problems. First we describe our solution and then address how we avoid
all of the above problems.
